<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#0a1628">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="JBLM Scout">
<meta name="description" content="Your complete guide to fun at JBLM and the Pacific Northwest">
<link rel="manifest" href="manifest.json">
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./sw.js').catch(() => {});
    });
  }
</script>
<link rel="apple-touch-icon" href="icons/icon-192.png">
<title>JBLM Scout ‚Äî Your Adventure Guide</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@400;600;700;900&family=Barlow:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --army-dark: #0a1628;
    --army-green: #1a3a2a;
    --army-accent: #2d6a4f;
    --neon-green: #39ff7a;
    --neon-amber: #ffb703;
    --neon-red: #ff4444;
    --neon-blue: #00b4d8;
    --surface: #111d2e;
    --surface2: #162236;
    --surface3: #1e2f45;
    --border: rgba(57, 255, 122, 0.15);
    --text: #e8f4f8;
    --text-dim: #8ba4be;
    --text-bright: #ffffff;
    --radius: 12px;
    --transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

  body {
    font-family: 'Barlow', sans-serif;
    background: var(--army-dark);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
  }

  /* Background grid pattern */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: 
      linear-gradient(rgba(57, 255, 122, 0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(57, 255, 122, 0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
  }

  /* ===== HEADER ===== */
  .app-header {
    position: sticky;
    top: 0;
    z-index: 100;
    background: rgba(10, 22, 40, 0.95);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border);
    padding: 0 16px;
  }

  .header-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 60px;
    max-width: 800px;
    margin: 0 auto;
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .logo-icon {
    width: 36px;
    height: 36px;
    background: linear-gradient(135deg, var(--neon-green), var(--army-accent));
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
  }

  .logo-text {
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 900;
    font-size: 22px;
    letter-spacing: 1px;
    color: var(--text-bright);
  }

  .logo-sub {
    font-size: 10px;
    color: var(--neon-green);
    letter-spacing: 2px;
    font-weight: 600;
    text-transform: uppercase;
    display: block;
    line-height: 1;
  }

  .header-right {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .last-updated {
    font-size: 10px;
    color: var(--text-dim);
    text-align: right;
  }

  .pulse-dot {
    width: 8px;
    height: 8px;
    background: var(--neon-green);
    border-radius: 50%;
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(0.8); }
  }

  /* ===== HERO BANNER ===== */
  .hero {
    position: relative;
    overflow: hidden;
    padding: 28px 16px 24px;
    background: linear-gradient(180deg, var(--army-green) 0%, transparent 100%);
    border-bottom: 1px solid var(--border);
  }

  .hero::after {
    content: '‚õ∞ JBLM';
    position: absolute;
    right: -10px;
    top: 50%;
    transform: translateY(-50%);
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 80px;
    font-weight: 900;
    color: rgba(57, 255, 122, 0.04);
    letter-spacing: -2px;
    pointer-events: none;
  }

  .hero-inner {
    max-width: 800px;
    margin: 0 auto;
  }

  .hero-tag {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: rgba(57, 255, 122, 0.1);
    border: 1px solid rgba(57, 255, 122, 0.3);
    color: var(--neon-green);
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    padding: 4px 10px;
    border-radius: 20px;
    margin-bottom: 12px;
  }

  .hero h1 {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 38px;
    font-weight: 900;
    line-height: 1.05;
    color: var(--text-bright);
    margin-bottom: 8px;
  }

  .hero h1 span {
    color: var(--neon-green);
  }

  .hero p {
    color: var(--text-dim);
    font-size: 14px;
    line-height: 1.5;
    max-width: 400px;
  }

  .hero-stats {
    display: flex;
    gap: 20px;
    margin-top: 16px;
  }

  .hero-stat {
    text-align: center;
  }

  .hero-stat .num {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 26px;
    font-weight: 900;
    color: var(--neon-amber);
    line-height: 1;
  }

  .hero-stat .lbl {
    font-size: 10px;
    color: var(--text-dim);
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  /* ===== SEARCH ===== */
  .search-section {
    padding: 16px;
    max-width: 800px;
    margin: 0 auto;
  }

  .search-wrap {
    position: relative;
  }

  .search-icon {
    position: absolute;
    left: 14px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 16px;
    color: var(--text-dim);
  }

  .search-input {
    width: 100%;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 50px;
    padding: 12px 16px 12px 42px;
    color: var(--text);
    font-family: 'Barlow', sans-serif;
    font-size: 15px;
    outline: none;
    transition: var(--transition);
  }

  .search-input::placeholder { color: var(--text-dim); }
  .search-input:focus {
    border-color: rgba(57, 255, 122, 0.5);
    background: var(--surface3);
  }

  /* ===== FILTER TABS ===== */
  .filter-section {
    padding: 0 16px 16px;
  }

  .filter-scroll {
    display: flex;
    gap: 8px;
    overflow-x: auto;
    scrollbar-width: none;
    padding-bottom: 4px;
  }

  .filter-scroll::-webkit-scrollbar { display: none; }

  .filter-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    white-space: nowrap;
    padding: 8px 14px;
    border-radius: 50px;
    border: 1px solid var(--border);
    background: var(--surface);
    color: var(--text-dim);
    font-family: 'Barlow', sans-serif;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition);
    flex-shrink: 0;
  }

  .filter-btn.active {
    background: var(--neon-green);
    border-color: var(--neon-green);
    color: var(--army-dark);
    font-weight: 700;
  }

  .filter-btn:hover:not(.active) {
    border-color: rgba(57, 255, 122, 0.4);
    color: var(--text);
  }

  /* ===== SECTION HEADER ===== */
  .section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 16px 12px;
    max-width: 800px;
    margin: 0 auto;
  }

  .section-title {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 20px;
    font-weight: 700;
    color: var(--text-bright);
    letter-spacing: 0.5px;
  }

  .section-count {
    font-size: 12px;
    color: var(--text-dim);
    background: var(--surface2);
    padding: 3px 10px;
    border-radius: 20px;
  }

  /* ===== CARD GRID ===== */
  .cards-container {
    padding: 0 16px 20px;
    max-width: 800px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  /* ===== ACTIVITY CARD ===== */
  .activity-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    overflow: hidden;
    cursor: pointer;
    transition: var(--transition);
    animation: fadeIn 0.4s ease forwards;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .activity-card:hover, .activity-card:active {
    border-color: rgba(57, 255, 122, 0.4);
    transform: translateY(-2px);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(57, 255, 122, 0.1);
  }

  .card-top {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 16px;
  }

  .card-emoji {
    width: 52px;
    height: 52px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    flex-shrink: 0;
    position: relative;
    overflow: hidden;
  }

  .card-info {
    flex: 1;
    min-width: 0;
  }

  .card-header-row {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 8px;
  }

  .card-name {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 18px;
    font-weight: 700;
    color: var(--text-bright);
    line-height: 1.2;
    flex: 1;
  }

  .card-badge {
    font-size: 10px;
    font-weight: 700;
    letter-spacing: 0.5px;
    padding: 3px 8px;
    border-radius: 4px;
    text-transform: uppercase;
    white-space: nowrap;
    flex-shrink: 0;
  }

  .badge-onbase {
    background: rgba(255, 183, 3, 0.15);
    color: var(--neon-amber);
    border: 1px solid rgba(255, 183, 3, 0.3);
  }

  .badge-offbase {
    background: rgba(0, 180, 216, 0.15);
    color: var(--neon-blue);
    border: 1px solid rgba(0, 180, 216, 0.3);
  }

  .badge-free {
    background: rgba(57, 255, 122, 0.15);
    color: var(--neon-green);
    border: 1px solid rgba(57, 255, 122, 0.3);
  }

  .card-meta {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 4px;
    flex-wrap: wrap;
  }

  .card-meta-item {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 12px;
    color: var(--text-dim);
  }

  .card-category {
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    padding: 2px 7px;
    border-radius: 4px;
    margin-top: 4px;
    display: inline-block;
  }

  .card-chevron {
    font-size: 18px;
    color: var(--text-dim);
    transition: var(--transition);
    flex-shrink: 0;
  }

  .activity-card:hover .card-chevron {
    color: var(--neon-green);
    transform: translateX(3px);
  }

  .card-preview {
    padding: 0 16px 14px;
    font-size: 13px;
    color: var(--text-dim);
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .card-tags {
    display: flex;
    gap: 6px;
    padding: 0 16px 14px;
    flex-wrap: wrap;
  }

  .tag {
    font-size: 11px;
    color: var(--text-dim);
    background: var(--surface2);
    border: 1px solid rgba(255,255,255,0.06);
    padding: 3px 8px;
    border-radius: 4px;
  }

  .card-rating {
    display: flex;
    align-items: center;
    gap: 3px;
    font-size: 12px;
    color: var(--neon-amber);
    font-weight: 600;
  }

  /* ===== MODAL ===== */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(8px);
    z-index: 200;
    display: flex;
    align-items: flex-end;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }

  .modal-overlay.open {
    opacity: 1;
    pointer-events: all;
  }

  .modal {
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
    background: var(--surface);
    border-radius: 20px 20px 0 0;
    border-top: 1px solid var(--border);
    border-left: 1px solid var(--border);
    border-right: 1px solid var(--border);
    max-height: 90vh;
    overflow-y: auto;
    transform: translateY(100%);
    transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .modal-overlay.open .modal {
    transform: translateY(0);
  }

  .modal-handle {
    width: 40px;
    height: 4px;
    background: rgba(255,255,255,0.15);
    border-radius: 2px;
    margin: 12px auto 0;
  }

  .modal-header {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 20px 20px 0;
  }

  .modal-emoji {
    width: 64px;
    height: 64px;
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 30px;
    flex-shrink: 0;
  }

  .modal-title-block {
    flex: 1;
  }

  .modal-title {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 26px;
    font-weight: 900;
    color: var(--text-bright);
    line-height: 1.1;
  }

  .modal-subtitle {
    font-size: 13px;
    color: var(--neon-green);
    font-weight: 600;
    margin-top: 2px;
  }

  .modal-body {
    padding: 20px;
  }

  .modal-section-title {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 14px;
    font-weight: 700;
    color: var(--text-dim);
    letter-spacing: 1.5px;
    text-transform: uppercase;
    margin-bottom: 8px;
    margin-top: 20px;
  }

  .modal-section-title:first-child { margin-top: 0; }

  .modal-description {
    font-size: 15px;
    color: var(--text);
    line-height: 1.65;
  }

  .modal-info-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin-bottom: 8px;
  }

  .info-pill {
    background: var(--surface2);
    border: 1px solid rgba(255,255,255,0.07);
    border-radius: 8px;
    padding: 12px;
  }

  .info-pill .label {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--text-dim);
    font-weight: 600;
  }

  .info-pill .value {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-bright);
    margin-top: 4px;
  }

  .info-pill .value.green { color: var(--neon-green); }
  .info-pill .value.amber { color: var(--neon-amber); }
  .info-pill .value.blue { color: var(--neon-blue); }

  .modal-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 8px;
  }

  .modal-tag {
    font-size: 12px;
    color: var(--text);
    background: var(--surface3);
    border: 1px solid rgba(255,255,255,0.08);
    padding: 5px 10px;
    border-radius: 6px;
  }

  .modal-links {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-top: 4px;
  }

  .modal-link {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: var(--surface2);
    border: 1px solid rgba(255,255,255,0.07);
    border-radius: 10px;
    padding: 14px 16px;
    text-decoration: none;
    color: var(--text);
    font-size: 14px;
    font-weight: 500;
    transition: var(--transition);
    cursor: pointer;
  }

  .modal-link:hover {
    border-color: rgba(57, 255, 122, 0.3);
    color: var(--neon-green);
  }

  .modal-link-icon {
    font-size: 16px;
  }

  .close-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: var(--surface2);
    border: none;
    color: var(--text-dim);
    font-size: 18px;
    cursor: pointer;
    align-self: flex-start;
    transition: var(--transition);
    flex-shrink: 0;
  }

  .close-btn:hover { color: var(--text-bright); background: var(--surface3); }

  /* ===== DIVIDER LABEL ===== */
  .divider-label {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 20px 16px 12px;
    max-width: 800px;
    margin: 0 auto;
  }

  .divider-label::before, .divider-label::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border);
  }

  .divider-text {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 14px;
    font-weight: 700;
    color: var(--text-dim);
    letter-spacing: 2px;
    text-transform: uppercase;
    white-space: nowrap;
  }

  /* ===== FEATURED ===== */
  .featured-strip {
    padding: 0 16px 24px;
    max-width: 800px;
    margin: 0 auto;
  }

  .featured-label {
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--neon-amber);
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .featured-cards {
    display: flex;
    gap: 12px;
    overflow-x: auto;
    scrollbar-width: none;
    padding-bottom: 4px;
  }

  .featured-cards::-webkit-scrollbar { display: none; }

  .featured-card {
    flex-shrink: 0;
    width: 180px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 16px;
    cursor: pointer;
    transition: var(--transition);
  }

  .featured-card:hover {
    border-color: rgba(57, 255, 122, 0.4);
    transform: translateY(-2px);
  }

  .featured-card-emoji {
    font-size: 28px;
    margin-bottom: 10px;
  }

  .featured-card-name {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 16px;
    font-weight: 700;
    color: var(--text-bright);
    line-height: 1.2;
    margin-bottom: 4px;
  }

  .featured-card-sub {
    font-size: 11px;
    color: var(--text-dim);
  }

  /* ===== EMPTY STATE ===== */
  .empty-state {
    text-align: center;
    padding: 48px 16px;
    color: var(--text-dim);
  }

  .empty-icon { font-size: 48px; margin-bottom: 12px; }
  .empty-title { font-family: 'Barlow Condensed', sans-serif; font-size: 22px; font-weight: 700; color: var(--text); margin-bottom: 6px; }
  .empty-sub { font-size: 14px; }

  /* ===== NAV BAR ===== */
  .nav-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(10, 22, 40, 0.97);
    backdrop-filter: blur(20px);
    border-top: 1px solid var(--border);
    display: flex;
    padding: 8px 0 max(8px, env(safe-area-inset-bottom));
    z-index: 150;
  }

  .nav-item {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    padding: 6px;
    cursor: pointer;
    transition: var(--transition);
    border: none;
    background: none;
    color: var(--text-dim);
  }

  .nav-item.active { color: var(--neon-green); }

  .nav-icon { font-size: 20px; line-height: 1; }
  .nav-label { font-size: 10px; font-weight: 600; letter-spacing: 0.5px; text-transform: uppercase; }

  /* ===== VIEWS ===== */
  .view { display: none; padding-bottom: 80px; }
  .view.active { display: block; }

  /* ===== RESOURCES VIEW ===== */
  .resources-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    padding: 16px;
    max-width: 800px;
    margin: 0 auto;
  }

  .resource-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 16px;
    cursor: pointer;
    transition: var(--transition);
    text-decoration: none;
  }

  .resource-card:hover {
    border-color: rgba(57, 255, 122, 0.4);
    transform: translateY(-2px);
  }

  .resource-emoji { font-size: 28px; margin-bottom: 10px; }
  .resource-name {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 16px;
    font-weight: 700;
    color: var(--text-bright);
    margin-bottom: 4px;
  }

  .resource-sub { font-size: 11px; color: var(--text-dim); line-height: 1.4; }

  /* ===== TIPS VIEW ===== */
  .tips-container {
    padding: 16px;
    max-width: 800px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .tip-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 18px;
  }

  .tip-number {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 36px;
    font-weight: 900;
    color: rgba(57, 255, 122, 0.2);
    line-height: 1;
    margin-bottom: 6px;
  }

  .tip-title {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 20px;
    font-weight: 700;
    color: var(--text-bright);
    margin-bottom: 8px;
  }

  .tip-body { font-size: 14px; color: var(--text-dim); line-height: 1.6; }

  /* ===== INSTALL BANNER ===== */
  .install-banner {
    margin: 0 16px 16px;
    background: linear-gradient(135deg, var(--army-green), rgba(45, 106, 79, 0.6));
    border: 1px solid rgba(57, 255, 122, 0.3);
    border-radius: var(--radius);
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    transition: var(--transition);
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
  }

  .install-banner:hover { border-color: var(--neon-green); }
  .install-banner-icon { font-size: 28px; }
  .install-banner-text { flex: 1; }
  .install-banner-title { font-family: 'Barlow Condensed', sans-serif; font-size: 17px; font-weight: 700; color: var(--text-bright); }
  .install-banner-sub { font-size: 12px; color: var(--neon-green); }
  .install-banner-arrow { font-size: 20px; color: var(--neon-green); }

  /* ===== SCROLLBAR ===== */
  ::-webkit-scrollbar { width: 4px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: rgba(57, 255, 122, 0.2); border-radius: 2px; }

  /* Category colors */
  .cat-mma { background: rgba(255, 68, 68, 0.15); }
  .cat-sports { background: rgba(57, 255, 122, 0.12); }
  .cat-outdoor { background: rgba(0, 180, 216, 0.12); }
  .cat-music { background: rgba(138, 43, 226, 0.15); }
  .cat-gaming { background: rgba(255, 183, 3, 0.12); }
  .cat-base { background: rgba(255, 183, 3, 0.12); }
  .cat-social { background: rgba(255, 100, 0, 0.12); }
  .cat-nature { background: rgba(34, 197, 94, 0.12); }

  .rating-stars { color: var(--neon-amber); }

  /* Animate delay for cards */
  .activity-card:nth-child(1) { animation-delay: 0.05s; }
  .activity-card:nth-child(2) { animation-delay: 0.10s; }
  .activity-card:nth-child(3) { animation-delay: 0.15s; }
  .activity-card:nth-child(4) { animation-delay: 0.20s; }
  .activity-card:nth-child(5) { animation-delay: 0.25s; }
  .activity-card:nth-child(6) { animation-delay: 0.30s; }
  .activity-card:nth-child(7) { animation-delay: 0.35s; }
  .activity-card:nth-child(8) { animation-delay: 0.40s; }
</style>
</head>
<body>

<!-- HEADER -->
<header class="app-header">
  <div class="header-inner">
    <div class="logo">
      <div class="logo-icon">üéñÔ∏è</div>
      <div>
        <span class="logo-text">JBLM SCOUT</span>
        <span class="logo-sub">Pacific Northwest Guide</span>
      </div>
    </div>
    <div class="header-right">
      <div>
        <div class="last-updated" id="lastUpdated">Loading...</div>
      </div>
      <div class="pulse-dot"></div>
    </div>
  </div>
</header>

<!-- VIEW: EXPLORE -->
<div class="view active" id="view-explore">
  <!-- Hero -->
  <div class="hero">
    <div class="hero-inner">
      <div class="hero-tag">üå≤ JBLM + 50 Mile Radius</div>
      <h1>Find Your<br><span>Next Adventure</span></h1>
      <p>Sports leagues, martial arts, concerts, hunting, D&D, outdoor activities ‚Äî everything a soldier needs to thrive.</p>
      <div class="hero-stats">
        <div class="hero-stat">
          <div class="num" id="totalCount">50+</div>
          <div class="lbl">Activities</div>
        </div>
        <div class="hero-stat">
          <div class="num">5</div>
          <div class="lbl">Categories</div>
        </div>
        <div class="hero-stat">
          <div class="num">50mi</div>
          <div class="lbl">Radius</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Search -->
  <div class="search-section">
    <div class="search-wrap">
      <span class="search-icon">üîç</span>
      <input class="search-input" type="text" placeholder="Search activities, places, sports..." id="searchInput" autocomplete="off">
    </div>
  </div>

  <!-- Filters -->
  <div class="filter-section">
    <div class="filter-scroll" id="filterBar">
      <button class="filter-btn active" data-cat="all">‚ö° All</button>
      <button class="filter-btn" data-cat="onbase">üéñÔ∏è On Base</button>
      <button class="filter-btn" data-cat="mma">ü•ä MMA & Martial Arts</button>
      <button class="filter-btn" data-cat="sports">üèÖ Sports Leagues</button>
      <button class="filter-btn" data-cat="outdoor">üå≤ Outdoor & Hunting</button>
      <button class="filter-btn" data-cat="music">üéµ Concerts & Nightlife</button>
      <button class="filter-btn" data-cat="gaming">üé≤ Gaming & Tabletop</button>
      <button class="filter-btn" data-cat="nature">‚õ∞Ô∏è Hiking & Nature</button>
      <button class="filter-btn" data-cat="social">üç∫ Social & Food</button>
    </div>
  </div>

  <!-- Cards -->
  <div class="section-header">
    <div class="section-title" id="sectionTitle">All Activities</div>
    <div class="section-count" id="sectionCount">Loading...</div>
  </div>
  <div class="cards-container" id="cardsContainer"></div>
</div>

<!-- VIEW: MAP -->
<div class="view" id="view-map">
  <div style="padding: 24px 16px; max-width:800px; margin:0 auto;">
    <div style="font-family:'Barlow Condensed',sans-serif; font-size:28px; font-weight:900; color:var(--text-bright); margin-bottom:8px;">üìç Area Map</div>
    <p style="color:var(--text-dim); font-size:14px; margin-bottom:24px;">JBLM and surrounding activities within 50 miles.</p>
    
    <div style="background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:20px; text-align:center; margin-bottom:16px;">
      <div style="font-size:48px; margin-bottom:12px;">üó∫Ô∏è</div>
      <div style="font-family:'Barlow Condensed',sans-serif; font-size:20px; font-weight:700; color:var(--text-bright); margin-bottom:8px;">Google Maps Integration</div>
      <p style="color:var(--text-dim); font-size:13px; line-height:1.6;">Tap any activity card in Explore to get directions. Or open the full area map below.</p>
      <div style="display:flex; flex-direction:column; gap:10px; margin-top:16px;">
        <a href="https://maps.google.com/?q=Joint+Base+Lewis-McChord,WA" target="_blank" style="background:var(--neon-green); color:var(--army-dark); text-decoration:none; padding:13px; border-radius:8px; font-weight:700; font-size:15px; font-family:'Barlow Condensed',sans-serif; letter-spacing:0.5px;">üìç VIEW JBLM ON GOOGLE MAPS</a>
        <a href="https://www.google.com/maps/search/activities+near+JBLM+Washington" target="_blank" style="background:var(--surface2); color:var(--text); text-decoration:none; padding:13px; border-radius:8px; font-weight:600; font-size:14px; border:1px solid var(--border);">üîç Search Activities Near JBLM</a>
      </div>
    </div>

    <div id="quickLinks" class="resources-grid" style="padding:0; margin-top:0;"></div>
  </div>
</div>

<!-- VIEW: RESOURCES -->
<div class="view" id="view-resources">
  <div style="padding:24px 16px 12px; max-width:800px; margin:0 auto;">
    <div style="font-family:'Barlow Condensed',sans-serif; font-size:28px; font-weight:900; color:var(--text-bright); margin-bottom:4px;">üéñÔ∏è Soldier Resources</div>
    <p style="color:var(--text-dim); font-size:14px; margin-bottom:0;">Official JBLM links, MWR programs, and key contacts.</p>
  </div>
  <div class="resources-grid" id="resourcesGrid"></div>
</div>

<!-- VIEW: TIPS -->
<div class="view" id="view-tips">
  <div style="padding:24px 16px 12px; max-width:800px; margin:0 auto;">
    <div style="font-family:'Barlow Condensed',sans-serif; font-size:28px; font-weight:900; color:var(--text-bright); margin-bottom:4px;">üí° New Soldier Tips</div>
    <p style="color:var(--text-dim); font-size:14px;">Make the most of JBLM and the Pacific Northwest.</p>
  </div>
  <div class="tips-container" id="tipsContainer"></div>

  <div style="padding: 0 16px; max-width:800px; margin:0 auto;">
    <div style="background:linear-gradient(135deg,rgba(57,255,122,0.08),rgba(0,180,216,0.08)); border:1px solid rgba(57,255,122,0.2); border-radius:var(--radius); padding:20px; margin-top:4px; margin-bottom:16px;">
      <div style="font-family:'Barlow Condensed',sans-serif; font-size:18px; font-weight:700; color:var(--neon-green); margin-bottom:8px;">üì≤ Install This App</div>
      <p style="font-size:13px; color:var(--text-dim); line-height:1.6; margin-bottom:12px;"><strong style="color:var(--text);">iPhone:</strong> Tap the Share button in Safari ‚Üí "Add to Home Screen"<br><strong style="color:var(--text);">Android:</strong> Tap the menu (‚ãÆ) in Chrome ‚Üí "Add to Home Screen"<br><br>Works offline. Updates automatically when new activities are added.</p>
    </div>
  </div>
</div>

<!-- MODAL -->
<div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
  <div class="modal" id="modalContent">
    <div class="modal-handle"></div>
    <div class="modal-header">
      <div class="modal-emoji" id="modalEmoji"></div>
      <div class="modal-title-block">
        <div class="modal-title" id="modalTitle"></div>
        <div class="modal-subtitle" id="modalSubtitle"></div>
      </div>
      <button class="close-btn" onclick="document.getElementById('modalOverlay').classList.remove('open')">‚úï</button>
    </div>
    <div class="modal-body" id="modalBody"></div>
  </div>
</div>

<!-- NAV BAR -->
<nav class="nav-bar">
  <button class="nav-item active" onclick="switchView('explore', this)">
    <span class="nav-icon">‚ö°</span>
    <span class="nav-label">Explore</span>
  </button>
  <button class="nav-item" onclick="switchView('map', this)">
    <span class="nav-icon">üìç</span>
    <span class="nav-label">Map</span>
  </button>
  <button class="nav-item" onclick="switchView('resources', this)">
    <span class="nav-icon">üéñÔ∏è</span>
    <span class="nav-label">Base</span>
  </button>
  <button class="nav-item" onclick="switchView('tips', this)">
    <span class="nav-icon">üí°</span>
    <span class="nav-label">Tips</span>
  </button>
</nav>

<script>
// ===== DATA =====
const ACTIVITIES = [
  // === ON BASE ===
  {
    id: 1,
    name: "JBLM MWR Sports & Fitness",
    category: "onbase",
    emoji: "üí™",
    emojiClass: "cat-base",
    badge: "onbase",
    location: "Joint Base Lewis-McChord",
    distance: "On Base",
    cost: "Free / Low Cost (MWR)",
    rating: 4.5,
    tags: ["MWR", "Fitness", "Recreation", "Free"],
    description: "The Morale, Welfare and Recreation (MWR) program at JBLM is one of the best in the Army. Includes world-class gym facilities, sports leagues, pools, bowling, golf, and dozens of recreational programs ‚Äî most are free or deeply discounted for active duty soldiers.",
    hours: "Varies by facility",
    website: "https://www.lewis-mcchord.com/",
    phone: "(253) 967-3309",
    details: [
      { label: "Cost", value: "Free / MWR", style: "green" },
      { label: "Who", value: "Active Duty + Family", style: "" },
    ],
    links: [
      { label: "üåê JBLM MWR Website", url: "https://www.lewis-mcchord.com/mwr/" },
      { label: "üìç Get Directions", url: "https://maps.google.com/?q=Joint+Base+Lewis-McChord+WA" }
    ]
  },
  {
    id: 2,
    name: "JBLM Sports Leagues (Basketball, Flag Football, Soccer)",
    category: "onbase",
    emoji: "üèÜ",
    emojiClass: "cat-base",
    badge: "onbase",
    location: "JBLM Athletic Fields & Gyms",
    distance: "On Base",
    cost: "Free / Low Cost (MWR)",
    rating: 4.4,
    tags: ["MWR", "Basketball", "Flag Football", "Soccer", "Volleyball", "Softball"],
    description: "JBLM MWR runs year-round intramural and open-category sports leagues across multiple sports. Compete against other units or sign up as an individual. Leagues include basketball, flag football, soccer, volleyball, softball, and more. Great way to meet people and stay competitive.",
    hours: "Evenings & Weekends",
    website: "https://www.jblmfmwr.com/sports",
    details: [
      { label: "Cost", value: "MWR / Free", style: "green" },
      { label: "Season", value: "Year-Round", style: "amber" },
    ],
    links: [
      { label: "üåê JBLM MWR Sports", url: "https://www.jblmfmwr.com/sports" },
      { label: "üìç JBLM Athletic Facilities", url: "https://maps.google.com/?q=JBLM+athletic+facilities" }
    ]
  },
  {
    id: 3,
    name: "JBLM Paintball & Outdoor Recreation",
    category: "onbase",
    emoji: "üéØ",
    emojiClass: "cat-base",
    badge: "onbase",
    location: "JBLM Outdoor Recreation Center",
    distance: "On Base",
    cost: "MWR Discounted Rates",
    rating: 4.3,
    tags: ["Paintball", "Rentals", "Archery", "Camping Gear"],
    description: "JBLM's Outdoor Recreation Center rents paintball gear, camping equipment, kayaks, bikes, and more at massive MWR discounts. They also offer guided trips, outdoor skills classes, and can connect you with hunting/fishing licensing resources.",
    hours: "Mon-Fri 9AM-6PM, Weekends 8AM-5PM",
    website: "https://www.jblmfmwr.com/outdoor-recreation",
    details: [
      { label: "Cost", value: "Discounted MWR", style: "green" },
      { label: "Type", value: "Rentals + Programs", style: "" },
    ],
    links: [
      { label: "üåê Outdoor Rec Center", url: "https://www.jblmfmwr.com/outdoor-recreation" },
    ]
  },
  {
    id: 4,
    name: "JBLM Golf Courses (Whispering Firs & Eagle's Pride)",
    category: "onbase",
    emoji: "‚õ≥",
    emojiClass: "cat-base",
    badge: "onbase",
    location: "JBLM Golf Courses",
    distance: "On Base",
    cost: "$15‚Äì$35 (military rate)",
    rating: 4.5,
    tags: ["Golf", "Outdoors", "MWR"],
    description: "Two beautiful 18-hole golf courses on base ‚Äî Eagle's Pride (full championship course) and Whispering Firs. Green fees for active duty are among the lowest you'll find anywhere. Great courses, great scenery, great price.",
    hours: "Dawn to Dusk",
    website: "https://www.jblmfmwr.com/golf",
    details: [
      { label: "Military Rate", value: "$15‚Äì$35", style: "green" },
      { label: "Courses", value: "2 Full 18-Hole", style: "amber" },
    ],
    links: [
      { label: "üåê Book Tee Times", url: "https://www.jblmfmwr.com/golf" },
    ]
  },
  {
    id: 5,
    name: "JBLM Bowling Center",
    category: "onbase",
    emoji: "üé≥",
    emojiClass: "cat-base",
    badge: "onbase",
    location: "Frontier Lanes, JBLM",
    distance: "On Base",
    cost: "~$3‚Äì$5/game",
    rating: 4.2,
    tags: ["Bowling", "Leagues", "Arcade", "Bar"],
    description: "Full bowling center with leagues, open bowling, arcade, and a bar/grill. Cheap games, cold drinks ‚Äî perfect for hanging out with your unit or making new friends. They run bowling leagues you can join solo or with a team.",
    hours: "Mon‚ÄìSun: 11AM‚Äì10PM",
    details: [
      { label: "Cost", value: "~$3‚Äì$5/game", style: "green" },
      { label: "Leagues", value: "Join Anytime", style: "blue" },
    ],
    links: [
      { label: "üìç Frontier Lanes, JBLM", url: "https://maps.google.com/?q=Frontier+Lanes+JBLM" },
    ]
  },

  // === MMA & MARTIAL ARTS ===
  {
    id: 6,
    name: "T-Town MMA / Checkmat Tacoma",
    category: "mma",
    emoji: "ü•ä",
    emojiClass: "cat-mma",
    badge: "offbase",
    location: "955 Tacoma Ave S, Tacoma",
    distance: "~8 miles",
    cost: "~$100‚Äì$140/mo",
    rating: 4.9,
    tags: ["BJJ", "Kickboxing", "MMA", "Competition", "Beginners Welcome"],
    description: "One of the highest-rated MMA gyms near JBLM with a 4.9‚≠ê rating from 71 reviews. Offering Brazilian Jiu-Jitsu (Checkmat affiliation), kickboxing, and MMA. Strong community, multiple coaches, black belt instructors. Active competition team if you want to compete, relaxed classes if you just want fitness.",
    hours: "Mon/Wed: 11AM‚Äì12:30PM & 5‚Äì8PM | Tue/Thu: 4:45‚Äì8PM | Fri: 5‚Äì8PM | Sat: 11AM‚Äì2PM | Sun: 9‚Äì10:30AM",
    website: "https://ttownmma.com",
    phone: "Check website",
    details: [
      { label: "Rating", value: "‚≠ê 4.9 / 71 Reviews", style: "amber" },
      { label: "Distance", value: "~8 miles from JBLM", style: "" },
    ],
    links: [
      { label: "üåê T-Town MMA Website", url: "https://ttownmma.com" },
      { label: "üìç Get Directions", url: "https://maps.google.com/?q=T-Town+MMA+955+Tacoma+Ave+S" },
      { label: "üìò Facebook / Schedule", url: "https://www.facebook.com/ttownmma" }
    ]
  },
  {
    id: 7,
    name: "Vital Jiu-Jitsu / Srisuk Muay Thai",
    category: "mma",
    emoji: "ü•ã",
    emojiClass: "cat-mma",
    badge: "offbase",
    location: "2519 Pacific Hwy E, Fife WA",
    distance: "~6 miles",
    cost: "~$100‚Äì$130/mo",
    rating: 4.9,
    tags: ["BJJ", "Muay Thai", "Competition", "Welcoming", "Years in Business"],
    description: "A highly respected gym with 4.9‚≠ê from 75 reviews. Vital has been a staple of the Tacoma martial arts community for 10+ years. Exceptional culture ‚Äî members consistently describe it as their 'second family.' Offers BJJ and Muay Thai with a focus on both recreational and competitive training.",
    hours: "Mon/Wed: 4:30‚Äì8:30PM | Tue/Thu: 5‚Äì8:30PM | Fri: 5:30‚Äì8:30PM | Sat: 10AM‚Äì1PM | Sun: 1‚Äì3PM",
    website: "https://vitaljj.com",
    details: [
      { label: "Rating", value: "‚≠ê 4.9 / 75 Reviews", style: "amber" },
      { label: "Distance", value: "~6 miles from JBLM", style: "" },
    ],
    links: [
      { label: "üåê Vital Jiu-Jitsu", url: "https://vitaljj.com" },
      { label: "üìç Get Directions", url: "https://maps.google.com/?q=Vital+Jiu+Jitsu+2519+Pacific+Hwy+E+Fife+WA" }
    ]
  },
  {
    id: 8,
    name: "Wave Combat Sports",
    category: "mma",
    emoji: "üè¥",
    emojiClass: "cat-mma",
    badge: "offbase",
    location: "1720 S 7th St, Tacoma",
    distance: "~10 miles",
    cost: "~$100‚Äì$150/mo",
    rating: 4.9,
    tags: ["Kickboxing", "Muay Thai", "BJJ", "Boxing", "Structured Program"],
    description: "4.9‚≠ê with 90 reviews ‚Äî Wave Combat Sports is known for elite striking coaching. Coach Micah Brown's method is described as 'paid seminar quality every class.' Spacious facility with a central ring. If you want top-tier kickboxing and Muay Thai instruction, this is your spot.",
    hours: "Mon‚ÄìFri: 12‚Äì8:30PM | Sat‚ÄìSun: Closed (check updates)",
    website: "https://www.wavecombatsports.com",
    details: [
      { label: "Rating", value: "‚≠ê 4.9 / 90 Reviews", style: "amber" },
      { label: "Specialty", value: "Elite Striking", style: "blue" },
    ],
    links: [
      { label: "üåê Wave Combat Sports", url: "https://www.wavecombatsports.com" },
      { label: "üìç Get Directions", url: "https://maps.google.com/?q=Wave+Combat+Sports+1720+S+7th+St+Tacoma" }
    ]
  },
  {
    id: 9,
    name: "JBLM Combatives Program",
    category: "mma",
    emoji: "‚öîÔ∏è",
    emojiClass: "cat-mma",
    badge: "onbase",
    location: "JBLM",
    distance: "On Base",
    cost: "Free (Active Duty)",
    rating: 4.6,
    tags: ["Army Combatives", "MACP", "BJJ", "Free", "Certification"],
    description: "JBLM runs Army Combatives (Modern Army Combatives Program / MACP) training courses. You can earn Level 1‚Äì4 Combatives certifications and participate in unit-level tournaments. This is essentially BJJ + wrestling blended with military applications ‚Äî great training and it looks great on your record.",
    hours: "Check unit schedule / Training Center",
    details: [
      { label: "Cost", value: "Free", style: "green" },
      { label: "Certification", value: "Levels 1‚Äì4", style: "amber" },
    ],
    links: [
      { label: "üìç JBLM Training Center", url: "https://maps.google.com/?q=JBLM+Combatives+Training" },
    ]
  },

  // === SPORTS LEAGUES ===
  {
    id: 10,
    name: "253 Lacrosse",
    category: "sports",
    emoji: "ü•ç",
    emojiClass: "cat-sports",
    badge: "offbase",
    location: "12180 Park Ave S, Tacoma",
    distance: "~5 miles",
    cost: "League fees vary",
    rating: 4.5,
    tags: ["Lacrosse", "Leagues", "Adult", "Tacoma"],
    description: "The primary adult lacrosse organization serving the Tacoma and South Pierce County area ‚Äî essentially JBLM's backyard. Runs adult recreational and competitive leagues. Great way to get into the local lacrosse community immediately after arriving.",
    hours: "Open 24/7 (check season schedule)",
    website: "https://www.253lacrosse.com",
    details: [
      { label: "Sport", value: "Lacrosse", style: "blue" },
      { label: "Distance", value: "~5 miles", style: "" },
    ],
    links: [
      { label: "üåê 253 Lacrosse", url: "https://www.253lacrosse.com" },
      { label: "üìç Get Directions", url: "https://maps.google.com/?q=12180+Park+Ave+S+Tacoma+WA" }
    ]
  },
  {
    id: 11,
    name: "Tacoma Adult Sports Leagues (Soccer, Softball, Volleyball)",
    category: "sports",
    emoji: "‚öΩ",
    emojiClass: "cat-sports",
    badge: "offbase",
    location: "Multiple locations, Tacoma",
    distance: "5‚Äì20 miles",
    cost: "$50‚Äì$150 (team or individual)",
    rating: 4.4,
    tags: ["Soccer", "Softball", "Volleyball", "Dodgeball", "WAKA", "Coed"],
    description: "Several recreational sports league organizations operate in the Tacoma area. Metro Parks Tacoma runs softball, soccer, and basketball leagues. WAKA and other social sports groups run coed kickball, dodgeball, and volleyball. Great for meeting people outside the military bubble.",
    website: "https://www.metroparkstacoma.org",
    details: [
      { label: "Organizer", value: "Metro Parks Tacoma", style: "blue" },
      { label: "Levels", value: "Rec & Competitive", style: "" },
    ],
    links: [
      { label: "üåê Metro Parks Tacoma", url: "https://www.metroparkstacoma.org/programs-activities/sports/" },
      { label: "üåê South Sound Social Sports", url: "https://www.southsoundsocialsports.com" }
    ]
  },
  {
    id: 12,
    name: "Cascades Lacrosse Club (Seattle Area)",
    category: "sports",
    emoji: "ü•ç",
    emojiClass: "cat-sports",
    badge: "offbase",
    location: "Seattle / Bellevue (45 miles)",
    distance: "~45 miles",
    cost: "Club fees",
    rating: 4.6,
    tags: ["Lacrosse", "Club", "Competitive", "PNLL"],
    description: "For more competitive lacrosse, the Pacific Northwest Lacrosse League (PNLL) has clubs in the greater Seattle area. Box lacrosse also available. Worth the drive if you're serious about the sport.",
    website: "https://www.pnll.org",
    details: [
      { label: "Level", value: "Competitive", style: "amber" },
      { label: "Distance", value: "~45 miles", style: "" },
    ],
    links: [
      { label: "üåê PNLL Lacrosse", url: "https://www.pnll.org" },
    ]
  },
  {
    id: 13,
    name: "Paul Bunyan Rifle & Sportsman's Club",
    category: "sports",
    emoji: "üéØ",
    emojiClass: "cat-outdoor",
    badge: "offbase",
    location: "17902 Meridian E, South Hill WA",
    distance: "~12 miles",
    cost: "Membership + range fees",
    rating: 4.4,
    tags: ["Shooting", "USPSA", "IDPA", "Rifle", "Pistol", "Shotgun", "Archery"],
    description: "A top-rated (4.4‚≠ê, 94 reviews) shooting club with 200-yard rifle ranges, pistol ranges, shotgun ranges, action bays, and archery. Hosts USPSA and IDPA competitions. Members-only but worth the membership. Perfect for maintaining shooting skills and competing in action sports.",
    hours: "Daily 7AM‚Äì10PM",
    website: "https://www.paulbunyanclub.org",
    details: [
      { label: "Rating", value: "‚≠ê 4.4 / 94 Reviews", style: "amber" },
      { label: "Range", value: "Up to 200 yards", style: "blue" },
    ],
    links: [
      { label: "üåê Paul Bunyan Club", url: "https://www.paulbunyanclub.org" },
      { label: "üìç Get Directions", url: "https://maps.google.com/?q=Paul+Bunyan+Rifle+Club+South+Hill+WA" }
    ]
  },

  // === OUTDOOR & HUNTING ===
  {
    id: 14,
    name: "Hunting: Mt. Rainier Foothills & WA Public Land",
    category: "outdoor",
    emoji: "ü¶å",
    emojiClass: "cat-outdoor",
    badge: "offbase",
    location: "Pierce & Thurston County Public Lands",
    distance: "20‚Äì50 miles",
    cost: "WA Hunting License ($50‚Äì$150/yr)",
    rating: 4.7,
    tags: ["Deer", "Elk", "Turkey", "Waterfowl", "Public Land", "Mt Rainier"],
    description: "Washington State has excellent hunting within 50 miles of JBLM. Deer and elk hunting in the Cascades foothills (GMUs 652, 654, 666), turkey in the south Sound area, waterfowl along the Nisqually Wildlife Refuge. Get your WA license at WDFW.wa.gov. Big J's Outdoor Store in Orting is the best local shop for all your hunting gear.",
    details: [
      { label: "License", value: "WDFW.wa.gov", style: "blue" },
      { label: "Season", value: "Fall (Sep‚ÄìDec)", style: "amber" },
    ],
    links: [
      { label: "üåê WA Hunting Licenses (WDFW)", url: "https://wdfw.wa.gov/licenses" },
      { label: "üåê WA Hunt Planner", url: "https://wdfw.wa.gov/hunting" },
      { label: "üìç Big J's Outdoor Store (Orting)", url: "https://maps.google.com/?q=Big+J%27s+Outdoor+Store+Orting+WA" }
    ]
  },
  {
    id: 15,
    name: "Big J's Outdoor Store",
    category: "outdoor",
    emoji: "üèïÔ∏è",
    emojiClass: "cat-outdoor",
    badge: "offbase",
    location: "107 Calistoga St W, Orting WA",
    distance: "~18 miles",
    cost: "Retail",
    rating: 4.7,
    tags: ["Hunting Gear", "Ammo", "Fishing", "Licenses", "Local", "Carhartt"],
    description: "4.7‚≠ê from nearly 1,000 reviews ‚Äî Big J's is THE local outdoor store for hunters and anglers near JBLM. Sells hunting/fishing licenses, ammo, firearms, Carhartt gear, rain gear, boots, and more. Friendly knowledgeable staff. Much better than big box stores.",
    hours: "Mon‚ÄìFri: 8AM‚Äì7PM | Sat: 8AM‚Äì6PM | Sun: 9AM‚Äì5PM",
    website: "https://www.bigjsoutdoor.com",
    details: [
      { label: "Rating", value: "‚≠ê 4.7 / 944 Reviews", style: "amber" },
      { label: "Distance", value: "~18 miles", style: "" },
    ],
    links: [
      { label: "üåê Big J's Website", url: "https://www.bigjsoutdoor.com" },
      { label: "üìç Get Directions", url: "https://maps.google.com/?q=Big+J%27s+Outdoor+Store+107+Calistoga+St+W+Orting+WA" }
    ]
  },
  {
    id: 16,
    name: "Fishing: Puget Sound, Lakes & Rivers",
    category: "outdoor",
    emoji: "üé£",
    emojiClass: "cat-outdoor",
    badge: "offbase",
    location: "Puget Sound, Steilacoom Lake, Nisqually River",
    distance: "5‚Äì40 miles",
    cost: "WA Fishing License ($30‚Äì$80/yr)",
    rating: 4.6,
    tags: ["Salmon", "Steelhead", "Bass", "Trout", "Crabbing", "Fishing License"],
    description: "World-class fishing right from JBLM's backyard. Puget Sound salmon runs (chinook, coho), Nisqually River steelhead, lake trout and bass at Steilacoom Lake (on/near base), Puyallup River. Crabbing in Puget Sound is also incredible. WA fishing license required ‚Äî get it at WDFW.wa.gov or Big J's.",
    details: [
      { label: "License", value: "WDFW.wa.gov", style: "blue" },
      { label: "Salmon", value: "Year-Round Runs", style: "amber" },
    ],
    links: [
      { label: "üåê WA Fishing Info (WDFW)", url: "https://wdfw.wa.gov/fishing" },
      { label: "üìç Steilacoom Lake (near base)", url: "https://maps.google.com/?q=Steilacoom+Lake+WA" }
    ]
  },
  {
    id: 17,
    name: "Mt. Rainier National Park",
    category: "nature",
    emoji: "‚õ∞Ô∏è",
    emojiClass: "cat-nature",
    badge: "offbase",
    location: "Paradise / Sunrise, Mt. Rainier NP",
    distance: "~55 miles",
    cost: "$35 vehicle pass",
    rating: 4.9,
    tags: ["Hiking", "Backpacking", "Snowshoeing", "Skiing", "Glacier", "Epic Views"],
    description: "Mt. Rainier is one of the most iconic mountains in North America, and it's basically in JBLM's backyard. Hundreds of trails from easy day hikes to the summit attempt (14,411 ft). Paradise area for winter snowshoeing and spring wildflowers. Sunrise for the best above-treeline views. Crystal Mountain ski area adjacent.",
    hours: "Open year-round (some roads seasonal)",
    website: "https://www.nps.gov/mora",
    details: [
      { label: "Distance", value: "~55 miles", style: "" },
      { label: "Pass", value: "$35 vehicle / Free w/ Military", style: "green" },
    ],
    links: [
      { label: "üåê NPS Mt. Rainier", url: "https://www.nps.gov/mora/planyourvisit/index.htm" },
      { label: "üìç Paradise Visitor Center", url: "https://maps.google.com/?q=Paradise+Visitor+Center+Mt+Rainier" }
    ]
  },
  {
    id: 18,
    name: "Olympic National Park & Peninsula",
    category: "nature",
    emoji: "üåä",
    emojiClass: "cat-nature",
    badge: "offbase",
    location: "Port Angeles / Sol Duc / Hoh",
    distance: "~80 miles (w/ ferry)",
    cost: "$35 vehicle pass",
    rating: 4.9,
    tags: ["Rainforest", "Beaches", "Backpacking", "Hot Springs", "Elk", "Camping"],
    description: "Olympic is one of the most biodiverse parks in the US ‚Äî rainforest, glaciers, wilderness beaches, and mountains all in one park. Sol Duc Hot Springs, Hoh Rainforest, Hurricane Ridge. Incredible backpacking. Drive or take the ferry from Tacoma. One of those places that makes you realize why you're stationed in the Pacific Northwest.",
    website: "https://www.nps.gov/olym",
    details: [
      { label: "Terrain", value: "Rainforest + Ocean", style: "blue" },
      { label: "Pass", value: "$35 / Military Free w/ Card", style: "green" },
    ],
    links: [
      { label: "üåê NPS Olympic Park", url: "https://www.nps.gov/olym" },
      { label: "üìç Hoh Rainforest", url: "https://maps.google.com/?q=Hoh+Rainforest+Olympic+National+Park" }
    ]
  },
  {
    id: 19,
    name: "Crystal Mountain Ski & Snowboard Resort",
    category: "nature",
    emoji: "üéø",
    emojiClass: "cat-nature",
    badge: "offbase",
    location: "Crystal Mountain Blvd, Enumclaw WA",
    distance: "~50 miles",
    cost: "$100‚Äì$150/day (lift ticket)",
    rating: 4.7,
    tags: ["Skiing", "Snowboarding", "Winter", "Mountain", "Terrain Parks"],
    description: "Washington's largest ski resort, with Mt. Rainier views from the top. Excellent beginner terrain, challenging expert runs, and a lively base area. Military discounts sometimes available. Amazing snowpack most years. Only about an hour from JBLM.",
    hours: "Winter Season: Nov‚ÄìApr",
    website: "https://www.crystalmountainresort.com",
    details: [
      { label: "Distance", value: "~50 miles", style: "" },
      { label: "Lifts", value: "10+ Chairlifts", style: "blue" },
    ],
    links: [
      { label: "üåê Crystal Mountain", url: "https://www.crystalmountainresort.com" },
      { label: "üìç Get Directions", url: "https://maps.google.com/?q=Crystal+Mountain+Resort+WA" }
    ]
  },
  {
    id: 20,
    name: "Kayaking & Paddleboarding ‚Äî Puget Sound",
    category: "outdoor",
    emoji: "üö£",
    emojiClass: "cat-outdoor",
    badge: "offbase",
    location: "American Lake, Steilacoom, Gig Harbor",
    distance: "5‚Äì15 miles",
    cost: "MWR Rentals / $15‚Äì$40 commercial",
    rating: 4.5,
    tags: ["Kayaking", "Paddleboard", "Sailing", "Puget Sound", "Water Sports"],
    description: "JBLM sits right next to American Lake and is close to Puget Sound and Steilacoom waterfront. MWR rents kayaks, canoes, and paddleboards at great rates. Commercial options available in Gig Harbor and Tacoma. Paddle out on the Sound with views of Mt. Rainier ‚Äî hard to beat.",
    details: [
      { label: "MWR Rentals", value: "Best Value", style: "green" },
      { label: "Water", value: "Lake + Puget Sound", style: "blue" },
    ],
    links: [
      { label: "üåê JBLM Outdoor Rec (Rentals)", url: "https://www.jblmfmwr.com/outdoor-recreation" },
      { label: "üìç American Lake", url: "https://maps.google.com/?q=American+Lake+JBLM+WA" }
    ]
  },

  // === CONCERTS & NIGHTLIFE ===
  {
    id: 21,
    name: "Real Art Tacoma",
    category: "music",
    emoji: "üé∏",
    emojiClass: "cat-music",
    badge: "offbase",
    location: "5412 S Tacoma Way, Tacoma",
    distance: "~8 miles",
    cost: "$10‚Äì$20 tickets",
    rating: 4.7,
    tags: ["Live Music", "All Ages", "Local Bands", "Indie", "Metal", "Punk"],
    description: "4.7‚≠ê from 297 reviews ‚Äî a beloved community music venue and 'bastion of all-ages music in the Northwest.' Extremely friendly staff and welcoming vibe. Great for catching emerging artists and local bands across all genres. They have merch, great sound system, and free iced water.",
    website: "https://www.realartspace.com",
    details: [
      { label: "Rating", value: "‚≠ê 4.7 / 297 Reviews", style: "amber" },
      { label: "Distance", value: "~8 miles", style: "" },
    ],
    links: [
      { label: "üåê Real Art Tacoma", url: "https://www.realartspace.com" },
      { label: "üìç Get Directions", url: "https://maps.google.com/?q=Real+Art+Tacoma+5412+S+Tacoma+Way" }
    ]
  },
  {
    id: 22,
    name: "Spanish Ballroom at Elks Temple",
    category: "music",
    emoji: "üé≠",
    emojiClass: "cat-music",
    badge: "offbase",
    location: "565 Broadway, Tacoma",
    distance: "~10 miles",
    cost: "$20‚Äì$60 tickets",
    rating: 4.6,
    tags: ["Live Music", "Concerts", "Historic Venue", "Big Shows", "Bars"],
    description: "Gorgeous historic venue in downtown Tacoma hosting mid-size touring acts. Multiple bars, multiple floors, great atmosphere. One of Tacoma's premier concert destinations. Check their calendar regularly ‚Äî they host acts that would cost much more to see in Seattle.",
    website: "https://www.elkstempletacoma.com",
    details: [
      { label: "Rating", value: "‚≠ê 4.6 / 187 Reviews", style: "amber" },
      { label: "Capacity", value: "700+ capacity", style: "" },
    ],
    links: [
      { label: "üåê Elks Temple Tacoma", url: "https://www.elkstempletacoma.com" },
      { label: "üìç Get Directions", url: "https://maps.google.com/?q=Spanish+Ballroom+Elks+Temple+Tacoma" }
    ]
  },
  {
    id: 23,
    name: "Tacoma Dome (Major Concerts)",
    category: "music",
    emoji: "üèüÔ∏è",
    emojiClass: "cat-music",
    badge: "offbase",
    location: "2727 E D St, Tacoma",
    distance: "~10 miles",
    cost: "$40‚Äì$200+ tickets",
    rating: 4.4,
    tags: ["Arena Concerts", "Major Artists", "Sports Events", "Huge Shows"],
    description: "The Tacoma Dome hosts major touring artists and large events. Recent acts include major country, rock, pop, and hip-hop headliners. Only 10 miles from JBLM ‚Äî you can get to massive concerts without going all the way to Seattle.",
    hours: "Event-based",
    website: "https://www.tacomadome.org",
    details: [
      { label: "Distance", value: "~10 miles", style: "" },
      { label: "Capacity", value: "~23,000", style: "blue" },
    ],
    links: [
      { label: "üåê Tacoma Dome Events", url: "https://www.tacomadome.org/events" },
      { label: "üìç Get Directions", url: "https://maps.google.com/?q=Tacoma+Dome+2727+E+D+St+Tacoma" }
    ]
  },
  {
    id: 24,
    name: "Seattle Concert Scene (40 Miles North)",
    category: "music",
    emoji: "üåÜ",
    emojiClass: "cat-music",
    badge: "offbase",
    location: "Seattle, WA (various venues)",
    distance: "~40 miles",
    cost: "$25‚Äì$100+ tickets",
    rating: 4.8,
    tags: ["Neumos", "Showbox", "Climate Pledge Arena", "Paramount", "Concerts"],
    description: "Seattle has one of the best live music scenes in North America. Key venues: Neumos (indie/rock, Capitol Hill), The Showbox (iconic mid-size), Climate Pledge Arena (NHL + mega-concerts), Paramount Theatre, and more. About 40 miles and 45‚Äì60 minutes from JBLM.",
    details: [
      { label: "Distance", value: "~40 miles", style: "" },
      { label: "Scene", value: "World-Class", style: "blue" },
    ],
    links: [
      { label: "üåê Neumos Seattle", url: "https://neumos.com" },
      { label: "üåê The Showbox", url: "https://www.showboxonline.com" },
      { label: "üåê Seattle Concerts (Songkick)", url: "https://www.songkick.com/metro-areas/24426-us-seattle" }
    ]
  },

  // === D&D & GAMING ===
  {
    id: 25,
    name: "TerraCrux Games",
    category: "gaming",
    emoji: "üêâ",
    emojiClass: "cat-gaming",
    badge: "offbase",
    location: "760 Commerce St, Tacoma",
    distance: "~12 miles",
    cost: "Free to play / Retail",
    rating: 4.7,
    tags: ["D&D", "Dungeons & Dragons", "MTG", "Warhammer", "Board Games", "Minis"],
    description: "4.7‚≠ê from 645 reviews ‚Äî described by reviewers as 'D&D Valhalla.' If you play D&D, this is your home base. Incredible selection of minis, sourcebooks, paints, and figures. Massive stock of Magic the Gathering singles. Open play nights, welcoming to all skill levels and backgrounds. Staff know their stuff inside and out.",
    hours: "Mon‚ÄìWed: 12‚Äì8PM | Thu‚ÄìFri: 12‚Äì10PM | Sat: 12‚Äì8PM | Sun: 12‚Äì7PM",
    website: "https://www.terracruxgames.com",
    details: [
      { label: "Rating", value: "‚≠ê 4.7 / 645 Reviews", style: "amber" },
      { label: "D&D", value: "Best in the Area", style: "green" },
    ],
    links: [
      { label: "üåê TerraCrux Games", url: "https://www.terracruxgames.com" },
      { label: "üìç Get Directions", url: "https://maps.google.com/?q=TerraCrux+Games+760+Commerce+St+Tacoma" }
    ]
  },
  {
    id: 26,
    name: "Tacoma Games",
    category: "gaming",
    emoji: "üé≤",
    emojiClass: "cat-gaming",
    badge: "offbase",
    location: "3013 6th Ave, Tacoma",
    distance: "~12 miles",
    cost: "Free to play / Retail",
    rating: 4.7,
    tags: ["Warhammer", "Kill Team", "MTG", "RPG", "Tournaments", "D&D"],
    description: "Friendly local game store (4.7‚≠ê) on 6th Ave with a knowledgeable community. Known for Warhammer Kill Team and 40K tournaments. Has play space for larger campaign sessions. Staff go out of their way to make you feel welcome ‚Äî will special order items and help with preorders.",
    hours: "Tue‚ÄìFri: 2‚Äì8PM | Sat‚ÄìSun: 12‚Äì8PM | Mon: Closed",
    details: [
      { label: "Rating", value: "‚≠ê 4.7 / 270 Reviews", style: "amber" },
      { label: "Specialty", value: "Warhammer Tournaments", style: "blue" },
    ],
    links: [
      { label: "üìç Get Directions", url: "https://maps.google.com/?q=Tacoma+Games+3013+6th+Ave+Tacoma" }
    ]
  },
  {
    id: 27,
    name: "Silver King Games & Hobby",
    category: "gaming",
    emoji: "‚öîÔ∏è",
    emojiClass: "cat-gaming",
    badge: "offbase",
    location: "5442 S Tacoma Way, Tacoma",
    distance: "~8 miles",
    cost: "Free to browse/play / Retail",
    rating: 4.8,
    tags: ["Warhammer", "Minis", "Painting", "D&D", "Community Hub", "Board Games"],
    description: "4.8‚≠ê from 83 reviews and described as 'Tacoma's hidden treasure.' Community-driven space where people come to hang out, play, and paint minis. Owner John creates a genuinely warm atmosphere. Try-before-you-buy house games, great mini painting supplies and space.",
    hours: "Mon: 11AM‚Äì7PM | Tue‚ÄìThu: 4‚Äì7PM | Fri‚ÄìSat: 11AM‚Äì9PM | Sun: 11AM‚Äì7PM",
    details: [
      { label: "Rating", value: "‚≠ê 4.8 / 83 Reviews", style: "amber" },
      { label: "Vibe", value: "Community Hub", style: "green" },
    ],
    links: [
      { label: "üìç Get Directions", url: "https://maps.google.com/?q=Silver+King+Games+5442+S+Tacoma+Way+Tacoma" }
    ]
  },
  {
    id: 28,
    name: "D&D Adventurers League (Local Organized Play)",
    category: "gaming",
    emoji: "üìú",
    emojiClass: "cat-gaming",
    badge: "offbase",
    location: "TerraCrux Games + Online",
    distance: "~12 miles",
    cost: "Free (bring your dice!)",
    rating: 4.6,
    tags: ["D&D", "Adventurers League", "Organized Play", "Beginner Friendly", "Drop-In"],
    description: "D&D Adventurers League is a structured organized play program where you can drop in to any store running sessions with a standard character. Great for soldiers new to the area ‚Äî no need to find a dedicated group first. Just show up with a character sheet. TerraCrux runs regular AL sessions.",
    details: [
      { label: "Cost", value: "Free", style: "green" },
      { label: "Format", value: "Drop-In Friendly", style: "blue" },
    ],
    links: [
      { label: "üåê D&D Adventurers League", url: "https://dnd.wizards.com/adventurers-league" },
      { label: "üìç TerraCrux Games", url: "https://maps.google.com/?q=TerraCrux+Games+Tacoma" }
    ]
  },

  // === SOCIAL & FOOD ===
  {
    id: 29,
    name: "Stadium District & 6th Ave ‚Äî Tacoma Bar Scene",
    category: "social",
    emoji: "üç∫",
    emojiClass: "cat-social",
    badge: "offbase",
    location: "6th Ave & Stadium District, Tacoma",
    distance: "~10 miles",
    cost: "Varies",
    rating: 4.5,
    tags: ["Bars", "Breweries", "Craft Beer", "Nightlife", "Social"],
    description: "Tacoma has a thriving bar and brewery scene. The Stadium District and 6th Avenue neighborhoods are packed with great spots. Check out Wingman Brewers, Dovetail Brewery, Tacoma Brewing Company, and many more. Great way to socialize outside the base bubble.",
    details: [
      { label: "Distance", value: "~10 miles", style: "" },
      { label: "Scene", value: "Craft Brewery Heavy", style: "blue" },
    ],
    links: [
      { label: "üåê Tacoma Craft Breweries", url: "https://www.visitjbsa.com/tacoma" },
      { label: "üìç 6th Ave Tacoma", url: "https://maps.google.com/?q=6th+Ave+Tacoma+WA+bars" }
    ]
  },
  {
    id: 30,
    name: "Escape Rooms Tacoma",
    category: "social",
    emoji: "üîê",
    emojiClass: "cat-social",
    badge: "offbase",
    location: "Multiple locations, Tacoma",
    distance: "~10 miles",
    cost: "$25‚Äì$35/person",
    rating: 4.6,
    tags: ["Escape Room", "Team Building", "Friends", "Group Activity"],
    description: "Tacoma has multiple great escape rooms ‚Äî perfect for unit bonding events or meeting new people. Team strategy, problem solving under pressure ‚Äî strangely on-brand for soldiers. Great for a group night out with your squad.",
    details: [
      { label: "Cost", value: "$25‚Äì$35/person", style: "" },
      { label: "Group Size", value: "2‚Äì8 people", style: "blue" },
    ],
    links: [
      { label: "üåê Escape Rooms Tacoma", url: "https://www.google.com/search?q=escape+rooms+tacoma+wa" }
    ]
  },
  {
    id: 31,
    name: "Tacoma Rainiers Baseball (AAA)",
    category: "social",
    emoji: "‚öæ",
    emojiClass: "cat-social",
    badge: "offbase",
    location: "Cheney Stadium, Tacoma",
    distance: "~8 miles",
    cost: "$12‚Äì$30",
    rating: 4.7,
    tags: ["Baseball", "Minor League", "Sports Fan", "Summer", "Affordable"],
    description: "The Tacoma Rainiers are the AAA affiliate of the Seattle Mariners. Cheney Stadium is a great intimate ballpark with cheap tickets, cold beer, and a great atmosphere. Watch future MLB stars before they make it big. Summer evenings at the ballpark are one of the best cheap nights out in the area.",
    hours: "April‚ÄìSeptember season",
    website: "https://www.milb.com/tacoma",
    details: [
      { label: "Tickets", value: "$12‚Äì$30", style: "green" },
      { label: "Distance", value: "~8 miles", style: "" },
    ],
    links: [
      { label: "üåê Tacoma Rainiers Tickets", url: "https://www.milb.com/tacoma/tickets" },
      { label: "üìç Cheney Stadium", url: "https://maps.google.com/?q=Cheney+Stadium+Tacoma" }
    ]
  },
  {
    id: 32,
    name: "Meetup.com ‚Äî Tacoma Area Groups",
    category: "social",
    emoji: "üë•",
    emojiClass: "cat-social",
    badge: "offbase",
    location: "Greater Tacoma Area",
    distance: "Varies",
    cost: "Free / Small fees",
    rating: 4.4,
    tags: ["Meetup", "Social", "Hiking", "Gaming", "Fitness", "New Friends"],
    description: "Meetup.com has active groups across Tacoma and the South Sound for hiking, gaming, fitness, social outings, language learning, and more. Great way to meet civilians and build a social network outside the base. Search for groups matching your interests.",
    website: "https://www.meetup.com/cities/us/wa/tacoma/",
    details: [
      { label: "Cost", value: "Mostly Free", style: "green" },
      { label: "Groups", value: "100+ in Tacoma", style: "blue" },
    ],
    links: [
      { label: "üåê Tacoma Meetup Groups", url: "https://www.meetup.com/cities/us/wa/tacoma/" },
    ]
  },
];

// Resources data
const RESOURCES = [
  { emoji: "üåê", name: "JBLM MWR Portal", sub: "Official recreation & events hub", url: "https://www.jblmfmwr.com" },
  { emoji: "üéñÔ∏è", name: "JBLM Homepage", sub: "Base directory & information", url: "https://home.army.mil/lewis-mcchord" },
  { emoji: "ü¶å", name: "WA Fishing & Hunting", sub: "Licenses, seasons, regulations", url: "https://wdfw.wa.gov" },
  { emoji: "üèîÔ∏è", name: "WA State Parks", sub: "Camping, trails, discover pass", url: "https://parks.wa.gov" },
  { emoji: "üèñÔ∏è", name: "NPS Annual Pass", sub: "Free with military ID!", url: "https://www.nps.gov/planyourvisit/military.htm" },
  { emoji: "üéµ", name: "Songkick", sub: "Find concerts near Tacoma", url: "https://www.songkick.com/metro-areas/24490-us-tacoma" },
  { emoji: "‚öîÔ∏è", name: "Roll20 / D&D Beyond", sub: "Online D&D tools", url: "https://roll20.net" },
  { emoji: "üß≠", name: "AllTrails", sub: "Hikes near JBLM", url: "https://www.alltrails.com/us/washington/tacoma" },
  { emoji: "üéØ", name: "WA Shooting Sports", sub: "Ranges & clubs directory", url: "https://www.wta.org" },
  { emoji: "üç∫", name: "Tacoma Events", sub: "City events calendar", url: "https://www.cityoftacoma.org/residents/parks_recreation__community_services/events_calendar" },
];

// Tips data
const TIPS = [
  { num: "01", title: "Get Your National Parks Pass FREE", body: "Active duty military get FREE access to all US National Parks with your military ID. This includes Mt. Rainier, Olympic, and North Cascades ‚Äî three world-class parks within 2 hours. No Interagency Pass needed." },
  { num: "02", title: "Use MWR for Everything", body: "JBLM MWR (Morale, Welfare & Recreation) is criminally underutilized. Free/discounted gym, golf, bowling, kayak rentals, camping gear, paintball, and tickets to events. Check jblmfmwr.com before paying full price anywhere." },
  { num: "03", title: "Lacrosse Community is Active", body: "253 Lacrosse is the local club ‚Äî reach out right away when you arrive. The Pacific Northwest has a growing lacrosse scene and they're always looking for players. Don't wait for a season to start." },
  { num: "04", title: "Hunting License Early", body: "Get your WA hunting license at wdfw.wa.gov before opening day. Tags for popular units (especially elk) have limited draws ‚Äî apply ASAP after arriving. Big J's in Orting is the best local shop for scouting info." },
  { num: "05", title: "Seattle is 45 Minutes Away", body: "Don't limit yourself to Tacoma. Seattle has world-class restaurants, concerts at Climate Pledge Arena, Pike Place Market, Seahawks & Mariners games, and one of the best bar scenes in the US. Easy day trip." },
  { num: "06", title: "Join TerraCrux D&D Night", body: "Show up to TerraCrux Games on a Thursday or Friday evening ‚Äî it's open game night and perfect for meeting other D&D players. No group needed. The community is extremely welcoming to newcomers." },
  { num: "07", title: "JBLM Combatives ‚Äî Level Up Your BJJ", body: "JBLM runs Army Combatives (MACP) training and competitions. Train BJJ for free, earn certifications (Level 1‚Äì4), and compete. Then supplement with a civilian gym for even faster development." },
  { num: "08", title: "Weather Tip ‚Äî Gear Up for Rain", body: "Western Washington is rainy from October through May. Don't let it stop outdoor activities ‚Äî invest in good rain gear (Big J's in Orting has great options). The mountains and trails are beautiful even in rain, and most civilians stay home." },
];

// ===== APP STATE =====
let currentCategory = 'all';
let searchQuery = '';

// ===== RENDER CARDS =====
function renderCards() {
  const container = document.getElementById('cardsContainer');
  const sectionTitle = document.getElementById('sectionTitle');
  const sectionCount = document.getElementById('sectionCount');
  const totalCount = document.getElementById('totalCount');

  let filtered = ACTIVITIES.filter(a => {
    const matchCat = currentCategory === 'all' || a.category === currentCategory;
    const q = searchQuery.toLowerCase();
    const matchSearch = !q || 
      a.name.toLowerCase().includes(q) ||
      a.description.toLowerCase().includes(q) ||
      a.tags.some(t => t.toLowerCase().includes(q)) ||
      a.location.toLowerCase().includes(q);
    return matchCat && matchSearch;
  });

  const catNames = { all: 'All Activities', onbase: 'üéñÔ∏è On Base', mma: 'ü•ä MMA & Martial Arts', sports: 'üèÖ Sports Leagues', outdoor: 'üå≤ Outdoor & Hunting', music: 'üéµ Concerts & Nightlife', gaming: 'üé≤ Gaming & D&D', nature: '‚õ∞Ô∏è Hiking & Nature', social: 'üç∫ Social & Food' };
  sectionTitle.textContent = catNames[currentCategory] || 'Activities';
  sectionCount.textContent = `${filtered.length} found`;
  totalCount.textContent = ACTIVITIES.length + '+';

  if (filtered.length === 0) {
    container.innerHTML = `<div class="empty-state"><div class="empty-icon">üîç</div><div class="empty-title">Nothing found</div><div class="empty-sub">Try a different search or category</div></div>`;
    return;
  }

  container.innerHTML = filtered.map((a, i) => `
    <div class="activity-card" onclick="openModal(${a.id})">
      <div class="card-top">
        <div class="card-emoji ${a.emojiClass}">${a.emoji}</div>
        <div class="card-info">
          <div class="card-header-row">
            <div class="card-name">${a.name}</div>
            <div class="card-badge ${a.badge === 'onbase' ? 'badge-onbase' : 'badge-offbase'}">${a.badge === 'onbase' ? 'ON BASE' : a.distance}</div>
          </div>
          <div class="card-meta">
            <span class="card-meta-item">üìç ${a.location.split(',')[0]}</span>
            ${a.rating ? `<span class="card-rating">‚≠ê ${a.rating}</span>` : ''}
            <span class="card-meta-item">üí∞ ${a.cost}</span>
          </div>
        </div>
        <div class="card-chevron">‚Ä∫</div>
      </div>
      <div class="card-preview">${a.description}</div>
      <div class="card-tags">${a.tags.slice(0,4).map(t => `<span class="tag">${t}</span>`).join('')}</div>
    </div>
  `).join('');
}

// ===== MODAL =====
function openModal(id) {
  const a = ACTIVITIES.find(x => x.id === id);
  if (!a) return;

  document.getElementById('modalEmoji').className = `modal-emoji ${a.emojiClass}`;
  document.getElementById('modalEmoji').textContent = a.emoji;
  document.getElementById('modalTitle').textContent = a.name;
  document.getElementById('modalSubtitle').textContent = a.category.toUpperCase() + ' ‚Ä¢ ' + (a.badge === 'onbase' ? 'On Base' : a.distance + ' from JBLM');

  const tagsHtml = a.tags.map(t => `<div class="modal-tag">${t}</div>`).join('');
  const detailsHtml = a.details.map(d => `
    <div class="info-pill">
      <div class="label">${d.label}</div>
      <div class="value ${d.style}">${d.value}</div>
    </div>
  `).join('');
  const linksHtml = (a.links || []).map(l => `
    <a class="modal-link" href="${l.url}" target="_blank">
      <span>${l.label}</span>
      <span class="modal-link-icon">‚Üó</span>
    </a>
  `).join('');
  const hoursHtml = a.hours ? `<div class="modal-section-title">Hours</div><div class="modal-description">${a.hours}</div>` : '';
  const phoneHtml = a.phone ? `<div class="modal-section-title">Phone</div><div class="modal-description">${a.phone}</div>` : '';

  document.getElementById('modalBody').innerHTML = `
    <div class="modal-section-title">About</div>
    <div class="modal-description">${a.description}</div>
    <div class="modal-section-title">Quick Info</div>
    <div class="modal-info-grid">${detailsHtml}</div>
    <div class="info-pill" style="margin-bottom:4px">
      <div class="label">Location</div>
      <div class="value">${a.location}</div>
    </div>
    ${hoursHtml}
    ${phoneHtml}
    <div class="modal-section-title">Tags</div>
    <div class="modal-tags">${tagsHtml}</div>
    ${linksHtml ? `<div class="modal-section-title">Links & Directions</div><div class="modal-links">${linksHtml}</div>` : ''}
  `;

  document.getElementById('modalOverlay').classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeModal(e) {
  if (e.target === document.getElementById('modalOverlay')) {
    document.getElementById('modalOverlay').classList.remove('open');
    document.body.style.overflow = '';
  }
}

document.getElementById('modalOverlay').addEventListener('click', (e) => {
  if (e.target === document.getElementById('modalOverlay')) {
    document.getElementById('modalOverlay').classList.remove('open');
    document.body.style.overflow = '';
  }
});

// ===== FILTERS =====
document.getElementById('filterBar').addEventListener('click', e => {
  const btn = e.target.closest('.filter-btn');
  if (!btn) return;
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  currentCategory = btn.dataset.cat;
  renderCards();
});

// ===== SEARCH =====
document.getElementById('searchInput').addEventListener('input', e => {
  searchQuery = e.target.value;
  renderCards();
});

// ===== NAV =====
function switchView(name, btn) {
  document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
  document.getElementById('view-' + name).classList.add('active');
  btn.classList.add('active');
}

// ===== RESOURCES =====
function renderResources() {
  document.getElementById('resourcesGrid').innerHTML = RESOURCES.map(r => `
    <a class="resource-card" href="${r.url}" target="_blank">
      <div class="resource-emoji">${r.emoji}</div>
      <div class="resource-name">${r.name}</div>
      <div class="resource-sub">${r.sub}</div>
    </a>
  `).join('');

  // Quick links in map view
  const quick = [
    { emoji: "üìç", name: "JBLM on Maps", sub: "Base location", url: "https://maps.google.com/?q=Joint+Base+Lewis-McChord+WA" },
    { emoji: "ü•ä", name: "MMA Gyms Near Me", sub: "Martial arts search", url: "https://www.google.com/maps/search/MMA+gym+near+JBLM+WA" },
    { emoji: "üéµ", name: "Local Concerts", sub: "Upcoming shows", url: "https://www.songkick.com/metro-areas/24490-us-tacoma" },
    { emoji: "üé≤", name: "Game Stores", sub: "D&D and tabletop", url: "https://www.google.com/maps/search/game+store+Tacoma+WA" },
  ];
  const ql = document.getElementById('quickLinks');
  if (ql) {
    ql.innerHTML = quick.map(r => `
      <a class="resource-card" href="${r.url}" target="_blank">
        <div class="resource-emoji">${r.emoji}</div>
        <div class="resource-name">${r.name}</div>
        <div class="resource-sub">${r.sub}</div>
      </a>
    `).join('');
  }
}

// ===== TIPS =====
function renderTips() {
  document.getElementById('tipsContainer').innerHTML = TIPS.map(t => `
    <div class="tip-card">
      <div class="tip-number">${t.num}</div>
      <div class="tip-title">${t.title}</div>
      <div class="tip-body">${t.body}</div>
    </div>
  `).join('');
}

// ===== LAST UPDATED =====
function setLastUpdated() {
  const now = new Date();
  document.getElementById('lastUpdated').textContent = `Updated ${now.toLocaleDateString('en-US', {month:'short', day:'numeric'})}`;
}

// ===== PWA INSTALL =====
let deferredPrompt = null;
window.addEventListener('beforeinstallprompt', e => {
  e.preventDefault();
  deferredPrompt = e;
});

// ===== INIT =====
renderCards();
renderResources();
renderTips();
setLastUpdated();

// Swipe down to close modal
let startY = 0;
document.getElementById('modalContent').addEventListener('touchstart', e => {
  startY = e.touches[0].clientY;
}, { passive: true });

document.getElementById('modalContent').addEventListener('touchend', e => {
  const diff = e.changedTouches[0].clientY - startY;
  if (diff > 80) {
    document.getElementById('modalOverlay').classList.remove('open');
    document.body.style.overflow = '';
  }
}, { passive: true });
</script>
</body>
</html>
